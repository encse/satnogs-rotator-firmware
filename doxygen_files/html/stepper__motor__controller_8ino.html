<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>satnogs-rotator-firmware: stepper_motor_controller/stepper_motor_controller.ino File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">satnogs-rotator-firmware
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_38beefcdfcb3558d1106b46c26a5f20c.html">stepper_motor_controller</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">stepper_motor_controller.ino File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;AccelStepper.h&gt;</code><br />
<code>#include &lt;Wire.h&gt;</code><br />
<code>#include &quot;<a class="el" href="globals_8h_source.html">../libraries/globals.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="easycomm_8h_source.html">../libraries/easycomm.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="rotator__pins_8h_source.html">../libraries/rotator_pins.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="rs485_8h_source.html">../libraries/rs485.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="endstop_8h_source.html">../libraries/endstop.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="watchdog_8h_source.html">../libraries/watchdog.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for stepper_motor_controller.ino:</div>
<div class="dyncontent">
<div class="center"><img src="stepper__motor__controller_8ino__incl.png" border="0" usemap="#stepper__motor__controller_2stepper__motor__controller_8ino" alt=""/></div>
<map name="stepper__motor__controller_2stepper__motor__controller_8ino" id="stepper__motor__controller_2stepper__motor__controller_8ino">
<area shape="rect" id="node4" href="globals_8h.html" title="../libraries/globals.h" alt="" coords="251,244,401,271"/>
<area shape="rect" id="node6" href="easycomm_8h.html" title="../libraries/easycomm.h" alt="" coords="389,169,564,196"/>
<area shape="rect" id="node9" href="rs485_8h.html" title="rs485.h" alt="" coords="156,244,227,271"/>
<area shape="rect" id="node10" href="rotator__pins_8h.html" title="rotator_pins.h" alt="" coords="693,244,805,271"/>
<area shape="rect" id="node11" href="endstop_8h.html" title="../libraries/endstop.h" alt="" coords="581,95,735,121"/>
<area shape="rect" id="node12" href="watchdog_8h.html" title="../libraries/watchdog.h" alt="" coords="389,95,556,121"/>
</map>
</div>
</div>
<p><a href="stepper__motor__controller_8ino_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a6f6f49388c74bb24a8f63771bd997d97"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="stepper__motor__controller_8ino.html#a6f6f49388c74bb24a8f63771bd997d97">SAMPLE_TIME</a>&#160;&#160;&#160;0.1</td></tr>
<tr class="memdesc:a6f6f49388c74bb24a8f63771bd997d97"><td class="mdescLeft">&#160;</td><td class="mdescRight">Control loop in s.  <a href="#a6f6f49388c74bb24a8f63771bd997d97">More...</a><br /></td></tr>
<tr class="separator:a6f6f49388c74bb24a8f63771bd997d97"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e8b3c8482e593df0ace933ad3de22ee"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="stepper__motor__controller_8ino.html#a7e8b3c8482e593df0ace933ad3de22ee">RATIO</a>&#160;&#160;&#160;54</td></tr>
<tr class="memdesc:a7e8b3c8482e593df0ace933ad3de22ee"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gear ratio of rotator gear box.  <a href="#a7e8b3c8482e593df0ace933ad3de22ee">More...</a><br /></td></tr>
<tr class="separator:a7e8b3c8482e593df0ace933ad3de22ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca9cca604052ac7a6f173b58b7d6e126"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="stepper__motor__controller_8ino.html#aca9cca604052ac7a6f173b58b7d6e126">MICROSTEP</a>&#160;&#160;&#160;8</td></tr>
<tr class="memdesc:aca9cca604052ac7a6f173b58b7d6e126"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set Microstep.  <a href="#aca9cca604052ac7a6f173b58b7d6e126">More...</a><br /></td></tr>
<tr class="separator:aca9cca604052ac7a6f173b58b7d6e126"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad95c8286fc30ece77d632ad00a94d80e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="stepper__motor__controller_8ino.html#ad95c8286fc30ece77d632ad00a94d80e">MIN_PULSE_WIDTH</a>&#160;&#160;&#160;20</td></tr>
<tr class="memdesc:ad95c8286fc30ece77d632ad00a94d80e"><td class="mdescLeft">&#160;</td><td class="mdescRight">In microsecond for AccelStepper.  <a href="#ad95c8286fc30ece77d632ad00a94d80e">More...</a><br /></td></tr>
<tr class="separator:ad95c8286fc30ece77d632ad00a94d80e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac2cd96d53dd3ba6407db6766c3d92b26"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="stepper__motor__controller_8ino.html#ac2cd96d53dd3ba6407db6766c3d92b26">MAX_SPEED</a>&#160;&#160;&#160;6400</td></tr>
<tr class="memdesc:ac2cd96d53dd3ba6407db6766c3d92b26"><td class="mdescLeft">&#160;</td><td class="mdescRight">In steps/s, consider the microstep.  <a href="#ac2cd96d53dd3ba6407db6766c3d92b26">More...</a><br /></td></tr>
<tr class="separator:ac2cd96d53dd3ba6407db6766c3d92b26"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a58daa60c7e280af9449f3cc46097652b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="stepper__motor__controller_8ino.html#a58daa60c7e280af9449f3cc46097652b">MAX_ACCELERATION</a>&#160;&#160;&#160;1600</td></tr>
<tr class="memdesc:a58daa60c7e280af9449f3cc46097652b"><td class="mdescLeft">&#160;</td><td class="mdescRight">In steps/s^2, consider the microstep.  <a href="#a58daa60c7e280af9449f3cc46097652b">More...</a><br /></td></tr>
<tr class="separator:a58daa60c7e280af9449f3cc46097652b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc0e9de1ad11261774993fbad495209e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="stepper__motor__controller_8ino.html#abc0e9de1ad11261774993fbad495209e">SPR</a>&#160;&#160;&#160;1600L</td></tr>
<tr class="memdesc:abc0e9de1ad11261774993fbad495209e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Step Per Revolution, consider the microstep.  <a href="#abc0e9de1ad11261774993fbad495209e">More...</a><br /></td></tr>
<tr class="separator:abc0e9de1ad11261774993fbad495209e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4acc4b3e38c809c8ca4d84d5c1083cf"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="stepper__motor__controller_8ino.html#af4acc4b3e38c809c8ca4d84d5c1083cf">MIN_M1_ANGLE</a>&#160;&#160;&#160;0</td></tr>
<tr class="memdesc:af4acc4b3e38c809c8ca4d84d5c1083cf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Minimum angle of azimuth.  <a href="#af4acc4b3e38c809c8ca4d84d5c1083cf">More...</a><br /></td></tr>
<tr class="separator:af4acc4b3e38c809c8ca4d84d5c1083cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac81f1607c784261cee0a9759a35f18ff"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="stepper__motor__controller_8ino.html#ac81f1607c784261cee0a9759a35f18ff">MAX_M1_ANGLE</a>&#160;&#160;&#160;360</td></tr>
<tr class="memdesc:ac81f1607c784261cee0a9759a35f18ff"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum angle of azimuth.  <a href="#ac81f1607c784261cee0a9759a35f18ff">More...</a><br /></td></tr>
<tr class="separator:ac81f1607c784261cee0a9759a35f18ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a45dd8cb284dc0672f292e90909ecc530"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="stepper__motor__controller_8ino.html#a45dd8cb284dc0672f292e90909ecc530">MIN_M2_ANGLE</a>&#160;&#160;&#160;0</td></tr>
<tr class="memdesc:a45dd8cb284dc0672f292e90909ecc530"><td class="mdescLeft">&#160;</td><td class="mdescRight">Minimum angle of elevation.  <a href="#a45dd8cb284dc0672f292e90909ecc530">More...</a><br /></td></tr>
<tr class="separator:a45dd8cb284dc0672f292e90909ecc530"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acaea33d85a46b9afdd404f6a45da8470"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="stepper__motor__controller_8ino.html#acaea33d85a46b9afdd404f6a45da8470">MAX_M2_ANGLE</a>&#160;&#160;&#160;180</td></tr>
<tr class="memdesc:acaea33d85a46b9afdd404f6a45da8470"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum angle of elevation.  <a href="#acaea33d85a46b9afdd404f6a45da8470">More...</a><br /></td></tr>
<tr class="separator:acaea33d85a46b9afdd404f6a45da8470"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa9fdf484ccfc3264b1505135c801aadc"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="stepper__motor__controller_8ino.html#aa9fdf484ccfc3264b1505135c801aadc">DEFAULT_HOME_STATE</a>&#160;&#160;&#160;HIGH</td></tr>
<tr class="memdesc:aa9fdf484ccfc3264b1505135c801aadc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Change to LOW according to Home sensor.  <a href="#aa9fdf484ccfc3264b1505135c801aadc">More...</a><br /></td></tr>
<tr class="separator:aa9fdf484ccfc3264b1505135c801aadc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf4a8c328d7d16e349494adf938d575c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="stepper__motor__controller_8ino.html#acf4a8c328d7d16e349494adf938d575c">HOME_DELAY</a>&#160;&#160;&#160;10000</td></tr>
<tr class="memdesc:acf4a8c328d7d16e349494adf938d575c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Time for homing Deceleration in millisecond.  <a href="#acf4a8c328d7d16e349494adf938d575c">More...</a><br /></td></tr>
<tr class="separator:acf4a8c328d7d16e349494adf938d575c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ac9a4325f61d2c3b2f45582cc3234df41"><td class="memItemLeft" align="right" valign="top">AccelStepper&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="stepper__motor__controller_8ino.html#ac9a4325f61d2c3b2f45582cc3234df41">stepper_az</a> (1, <a class="el" href="rotator__pins_8h.html#a52eb32b92f0d0d1fdfc59a83e22d389d">M1IN1</a>, <a class="el" href="rotator__pins_8h.html#a157fe9dc9b50d6f912b57b3422848700">M1IN2</a>)</td></tr>
<tr class="separator:ac9a4325f61d2c3b2f45582cc3234df41"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae50506f007819f8841a2ead6e8ddb509"><td class="memItemLeft" align="right" valign="top">AccelStepper&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="stepper__motor__controller_8ino.html#ae50506f007819f8841a2ead6e8ddb509">stepper_el</a> (1, <a class="el" href="rotator__pins_8h.html#ad43a98121cb04032302978a3319ba24e">M2IN1</a>, <a class="el" href="rotator__pins_8h.html#a1f7e92e76bed5849fc1edc2e42c995dc">M2IN2</a>)</td></tr>
<tr class="separator:ae50506f007819f8841a2ead6e8ddb509"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe48c9319f61788ed4622597bdaf17ab"><td class="memItemLeft" align="right" valign="top">enum <a class="el" href="globals_8h.html#a455fc53a09c638322a14f309a295e7f1">_rotator_error</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="stepper__motor__controller_8ino.html#afe48c9319f61788ed4622597bdaf17ab">homing</a> (int32_t seek_az, int32_t seek_el)</td></tr>
<tr class="memdesc:afe48c9319f61788ed4622597bdaf17ab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Move both axis with one direction in order to find home position, end-stop switches.  <a href="#afe48c9319f61788ed4622597bdaf17ab">More...</a><br /></td></tr>
<tr class="separator:afe48c9319f61788ed4622597bdaf17ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a989afa0bbcee20968a0c01cb53bf3159"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="stepper__motor__controller_8ino.html#a989afa0bbcee20968a0c01cb53bf3159">deg2step</a> (float deg)</td></tr>
<tr class="memdesc:a989afa0bbcee20968a0c01cb53bf3159"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert degrees to steps according to step/revolution, rotator gear box ratio and microstep.  <a href="#a989afa0bbcee20968a0c01cb53bf3159">More...</a><br /></td></tr>
<tr class="separator:a989afa0bbcee20968a0c01cb53bf3159"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d74466a27b92f353f6e74a079bb228d"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="stepper__motor__controller_8ino.html#a8d74466a27b92f353f6e74a079bb228d">step2deg</a> (int32_t step)</td></tr>
<tr class="memdesc:a8d74466a27b92f353f6e74a079bb228d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert steps to degrees according to step/revolution, rotator gear box ratio and microstep.  <a href="#a8d74466a27b92f353f6e74a079bb228d">More...</a><br /></td></tr>
<tr class="separator:a8d74466a27b92f353f6e74a079bb228d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fc01d736fe50cf5b977f755b675f11d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="stepper__motor__controller_8ino.html#a4fc01d736fe50cf5b977f755b675f11d">setup</a> ()</td></tr>
<tr class="separator:a4fc01d736fe50cf5b977f755b675f11d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe461d27b9c48d5921c00d521181f12f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="stepper__motor__controller_8ino.html#afe461d27b9c48d5921c00d521181f12f">loop</a> ()</td></tr>
<tr class="separator:afe461d27b9c48d5921c00d521181f12f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ab758c64f84e0623e98a61e37b9bdd2b7"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="stepper__motor__controller_8ino.html#ab758c64f84e0623e98a61e37b9bdd2b7">t_run</a> = 0</td></tr>
<tr class="separator:ab758c64f84e0623e98a61e37b9bdd2b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43731445552d0e8cea4cbc7c75ba56cb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classeasycomm.html">easycomm</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="stepper__motor__controller_8ino.html#a43731445552d0e8cea4cbc7c75ba56cb">comm</a></td></tr>
<tr class="separator:a43731445552d0e8cea4cbc7c75ba56cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c0a9fc59fead4da5429a12a827f6e92"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classendstop.html">endstop</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="stepper__motor__controller_8ino.html#a0c0a9fc59fead4da5429a12a827f6e92">switch_az</a> (<a class="el" href="rotator__pins_8h.html#ad98a4599f8bbf48bb5b425ce5edb5a42">SW1</a>, <a class="el" href="stepper__motor__controller_8ino.html#aa9fdf484ccfc3264b1505135c801aadc">DEFAULT_HOME_STATE</a>)</td></tr>
<tr class="separator:a0c0a9fc59fead4da5429a12a827f6e92"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0886ffe9fa915cc70ac3ed7e528145d9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classendstop.html">endstop</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="stepper__motor__controller_8ino.html#a0886ffe9fa915cc70ac3ed7e528145d9">switch_el</a> (<a class="el" href="rotator__pins_8h.html#a276a7c4ba0f813d53715e2ec2595d906">SW2</a>, <a class="el" href="stepper__motor__controller_8ino.html#aa9fdf484ccfc3264b1505135c801aadc">DEFAULT_HOME_STATE</a>)</td></tr>
<tr class="separator:a0886ffe9fa915cc70ac3ed7e528145d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa21a88a61f63525bb1db8401772e7f70"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classwdt__timer.html">wdt_timer</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="stepper__motor__controller_8ino.html#aa21a88a61f63525bb1db8401772e7f70">wdt</a></td></tr>
<tr class="separator:aa21a88a61f63525bb1db8401772e7f70"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This is the documentation for satnogs rotator controller firmware for stepper motors configuration. The board (PCB) is placed in <a href="https://gitlab.com/librespacefoundation/satnogs/satnogs-rotator-controller">satnogs-rotator-controller </a> and is for releases: v2.0 v2.1 v2.2 <a href="https://wiki.satnogs.org/SatNOGS_Rotator_Controller">wiki page </a></p>
<h1><a class="anchor" id="dependencies"></a>
Dependencies</h1>
<p>This firmware depends on <a href="http://www.airspayce.com/mikem/arduino/AccelStepper/index.htmlhttp://www.airspayce.com/mikem/arduino/AccelStepper/index.html">AccelStepper library</a> being present on your system. Please make sure you have installed the latest version before using this firmware.</p>
<h1><a class="anchor" id="license"></a>
License</h1>
<p>Licensed under the GPLv3. </p>

<p class="definition">Definition in file <a class="el" href="stepper__motor__controller_8ino_source.html">stepper_motor_controller.ino</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="aa9fdf484ccfc3264b1505135c801aadc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa9fdf484ccfc3264b1505135c801aadc">&#9670;&nbsp;</a></span>DEFAULT_HOME_STATE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEFAULT_HOME_STATE&#160;&#160;&#160;HIGH</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Change to LOW according to Home sensor. </p>

<p class="definition">Definition at line <a class="el" href="stepper__motor__controller_8ino_source.html#l00036">36</a> of file <a class="el" href="stepper__motor__controller_8ino_source.html">stepper_motor_controller.ino</a>.</p>

</div>
</div>
<a id="acf4a8c328d7d16e349494adf938d575c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acf4a8c328d7d16e349494adf938d575c">&#9670;&nbsp;</a></span>HOME_DELAY</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define HOME_DELAY&#160;&#160;&#160;10000</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Time for homing Deceleration in millisecond. </p>

<p class="definition">Definition at line <a class="el" href="stepper__motor__controller_8ino_source.html#l00037">37</a> of file <a class="el" href="stepper__motor__controller_8ino_source.html">stepper_motor_controller.ino</a>.</p>

<p class="reference">Referenced by <a class="el" href="stepper__motor__controller_8ino_source.html#l00154">homing()</a>.</p>

</div>
</div>
<a id="a58daa60c7e280af9449f3cc46097652b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a58daa60c7e280af9449f3cc46097652b">&#9670;&nbsp;</a></span>MAX_ACCELERATION</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_ACCELERATION&#160;&#160;&#160;1600</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>In steps/s^2, consider the microstep. </p>

<p class="definition">Definition at line <a class="el" href="stepper__motor__controller_8ino_source.html#l00030">30</a> of file <a class="el" href="stepper__motor__controller_8ino_source.html">stepper_motor_controller.ino</a>.</p>

<p class="reference">Referenced by <a class="el" href="stepper__motor__controller_8ino_source.html#l00059">setup()</a>.</p>

</div>
</div>
<a id="ac81f1607c784261cee0a9759a35f18ff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac81f1607c784261cee0a9759a35f18ff">&#9670;&nbsp;</a></span>MAX_M1_ANGLE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_M1_ANGLE&#160;&#160;&#160;360</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Maximum angle of azimuth. </p>

<p class="definition">Definition at line <a class="el" href="stepper__motor__controller_8ino_source.html#l00033">33</a> of file <a class="el" href="stepper__motor__controller_8ino_source.html">stepper_motor_controller.ino</a>.</p>

<p class="reference">Referenced by <a class="el" href="stepper__motor__controller_8ino_source.html#l00084">loop()</a>.</p>

</div>
</div>
<a id="acaea33d85a46b9afdd404f6a45da8470"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acaea33d85a46b9afdd404f6a45da8470">&#9670;&nbsp;</a></span>MAX_M2_ANGLE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_M2_ANGLE&#160;&#160;&#160;180</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Maximum angle of elevation. </p>

<p class="definition">Definition at line <a class="el" href="stepper__motor__controller_8ino_source.html#l00035">35</a> of file <a class="el" href="stepper__motor__controller_8ino_source.html">stepper_motor_controller.ino</a>.</p>

<p class="reference">Referenced by <a class="el" href="stepper__motor__controller_8ino_source.html#l00084">loop()</a>.</p>

</div>
</div>
<a id="ac2cd96d53dd3ba6407db6766c3d92b26"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac2cd96d53dd3ba6407db6766c3d92b26">&#9670;&nbsp;</a></span>MAX_SPEED</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_SPEED&#160;&#160;&#160;6400</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>In steps/s, consider the microstep. </p>

<p class="definition">Definition at line <a class="el" href="stepper__motor__controller_8ino_source.html#l00029">29</a> of file <a class="el" href="stepper__motor__controller_8ino_source.html">stepper_motor_controller.ino</a>.</p>

<p class="reference">Referenced by <a class="el" href="stepper__motor__controller_8ino_source.html#l00059">setup()</a>.</p>

</div>
</div>
<a id="aca9cca604052ac7a6f173b58b7d6e126"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aca9cca604052ac7a6f173b58b7d6e126">&#9670;&nbsp;</a></span>MICROSTEP</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MICROSTEP&#160;&#160;&#160;8</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set Microstep. </p>

<p class="definition">Definition at line <a class="el" href="stepper__motor__controller_8ino_source.html#l00027">27</a> of file <a class="el" href="stepper__motor__controller_8ino_source.html">stepper_motor_controller.ino</a>.</p>

</div>
</div>
<a id="af4acc4b3e38c809c8ca4d84d5c1083cf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af4acc4b3e38c809c8ca4d84d5c1083cf">&#9670;&nbsp;</a></span>MIN_M1_ANGLE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MIN_M1_ANGLE&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Minimum angle of azimuth. </p>

<p class="definition">Definition at line <a class="el" href="stepper__motor__controller_8ino_source.html#l00032">32</a> of file <a class="el" href="stepper__motor__controller_8ino_source.html">stepper_motor_controller.ino</a>.</p>

</div>
</div>
<a id="a45dd8cb284dc0672f292e90909ecc530"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a45dd8cb284dc0672f292e90909ecc530">&#9670;&nbsp;</a></span>MIN_M2_ANGLE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MIN_M2_ANGLE&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Minimum angle of elevation. </p>

<p class="definition">Definition at line <a class="el" href="stepper__motor__controller_8ino_source.html#l00034">34</a> of file <a class="el" href="stepper__motor__controller_8ino_source.html">stepper_motor_controller.ino</a>.</p>

</div>
</div>
<a id="ad95c8286fc30ece77d632ad00a94d80e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad95c8286fc30ece77d632ad00a94d80e">&#9670;&nbsp;</a></span>MIN_PULSE_WIDTH</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MIN_PULSE_WIDTH&#160;&#160;&#160;20</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>In microsecond for AccelStepper. </p>

<p class="definition">Definition at line <a class="el" href="stepper__motor__controller_8ino_source.html#l00028">28</a> of file <a class="el" href="stepper__motor__controller_8ino_source.html">stepper_motor_controller.ino</a>.</p>

<p class="reference">Referenced by <a class="el" href="stepper__motor__controller_8ino_source.html#l00059">setup()</a>.</p>

</div>
</div>
<a id="a7e8b3c8482e593df0ace933ad3de22ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7e8b3c8482e593df0ace933ad3de22ee">&#9670;&nbsp;</a></span>RATIO</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RATIO&#160;&#160;&#160;54</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gear ratio of rotator gear box. </p>

<p class="definition">Definition at line <a class="el" href="stepper__motor__controller_8ino_source.html#l00026">26</a> of file <a class="el" href="stepper__motor__controller_8ino_source.html">stepper_motor_controller.ino</a>.</p>

<p class="reference">Referenced by <a class="el" href="stepper__motor__controller_8ino_source.html#l00211">deg2step()</a>, and <a class="el" href="stepper__motor__controller_8ino_source.html#l00224">step2deg()</a>.</p>

</div>
</div>
<a id="a6f6f49388c74bb24a8f63771bd997d97"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6f6f49388c74bb24a8f63771bd997d97">&#9670;&nbsp;</a></span>SAMPLE_TIME</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SAMPLE_TIME&#160;&#160;&#160;0.1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Control loop in s. </p>

<p class="definition">Definition at line <a class="el" href="stepper__motor__controller_8ino_source.html#l00025">25</a> of file <a class="el" href="stepper__motor__controller_8ino_source.html">stepper_motor_controller.ino</a>.</p>

</div>
</div>
<a id="abc0e9de1ad11261774993fbad495209e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abc0e9de1ad11261774993fbad495209e">&#9670;&nbsp;</a></span>SPR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SPR&#160;&#160;&#160;1600L</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Step Per Revolution, consider the microstep. </p>

<p class="definition">Definition at line <a class="el" href="stepper__motor__controller_8ino_source.html#l00031">31</a> of file <a class="el" href="stepper__motor__controller_8ino_source.html">stepper_motor_controller.ino</a>.</p>

<p class="reference">Referenced by <a class="el" href="stepper__motor__controller_8ino_source.html#l00211">deg2step()</a>, and <a class="el" href="stepper__motor__controller_8ino_source.html#l00224">step2deg()</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a989afa0bbcee20968a0c01cb53bf3159"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a989afa0bbcee20968a0c01cb53bf3159">&#9670;&nbsp;</a></span>deg2step()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t deg2step </td>
          <td>(</td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>deg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert degrees to steps according to step/revolution, rotator gear box ratio and microstep. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">deg</td><td>Degrees in float format </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Steps for stepper motor driver, int32_t </dd></dl>

<p class="definition">Definition at line <a class="el" href="stepper__motor__controller_8ino_source.html#l00211">211</a> of file <a class="el" href="stepper__motor__controller_8ino_source.html">stepper_motor_controller.ino</a>.</p>

<p class="reference">References <a class="el" href="stepper__motor__controller_8ino_source.html#l00026">RATIO</a>, and <a class="el" href="stepper__motor__controller_8ino_source.html#l00031">SPR</a>.</p>

<p class="reference">Referenced by <a class="el" href="stepper__motor__controller_8ino_source.html#l00084">loop()</a>.</p>

</div>
</div>
<a id="afe48c9319f61788ed4622597bdaf17ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe48c9319f61788ed4622597bdaf17ab">&#9670;&nbsp;</a></span>homing()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="globals_8h.html#a455fc53a09c638322a14f309a295e7f1">_rotator_error</a> homing </td>
          <td>(</td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>seek_az</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>seek_el</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Move both axis with one direction in order to find home position, end-stop switches. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">seek_az</td><td>Steps to find home position for azimuth axis </td></tr>
    <tr><td class="paramname">seek_el</td><td>Steps to find home position for elevation axis </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>_rotator_error </dd></dl>

<p class="definition">Definition at line <a class="el" href="stepper__motor__controller_8ino_source.html#l00154">154</a> of file <a class="el" href="stepper__motor__controller_8ino_source.html">stepper_motor_controller.ino</a>.</p>

<p class="reference">References <a class="el" href="globals_8h_source.html#l00051">control_az</a>, <a class="el" href="globals_8h_source.html#l00054">control_el</a>, <a class="el" href="endstop_8h_source.html#l00045">endstop::get_state()</a>, <a class="el" href="stepper__motor__controller_8ino_source.html#l00037">HOME_DELAY</a>, <a class="el" href="globals_8h_source.html#l00021">homing_error</a>, <a class="el" href="globals_8h_source.html#l00021">no_error</a>, <a class="el" href="globals_8h_source.html#l00033">_control::setpoint</a>, <a class="el" href="stepper__motor__controller_8ino.html#ac9a4325f61d2c3b2f45582cc3234df41">stepper_az()</a>, <a class="el" href="stepper__motor__controller_8ino.html#ae50506f007819f8841a2ead6e8ddb509">stepper_el()</a>, <a class="el" href="stepper__motor__controller_8ino.html#a0c0a9fc59fead4da5429a12a827f6e92">switch_az</a>, <a class="el" href="stepper__motor__controller_8ino.html#a0886ffe9fa915cc70ac3ed7e528145d9">switch_el</a>, <a class="el" href="watchdog_8h_source.html#l00045">wdt_timer::watchdog_reset()</a>, and <a class="el" href="stepper__motor__controller_8ino_source.html#l00053">wdt</a>.</p>

<p class="reference">Referenced by <a class="el" href="stepper__motor__controller_8ino_source.html#l00084">loop()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="stepper__motor__controller_8ino_afe48c9319f61788ed4622597bdaf17ab_cgraph.png" border="0" usemap="#stepper__motor__controller_8ino_afe48c9319f61788ed4622597bdaf17ab_cgraph" alt=""/></div>
<map name="stepper__motor__controller_8ino_afe48c9319f61788ed4622597bdaf17ab_cgraph" id="stepper__motor__controller_8ino_afe48c9319f61788ed4622597bdaf17ab_cgraph">
<area shape="rect" id="node2" href="classendstop.html#a530a60aaf81bd5022e56df71c194dfbc" title="Get the state of end&#45;stop. " alt="" coords="132,5,275,32"/>
<area shape="rect" id="node3" href="stepper__motor__controller_8ino.html#ac9a4325f61d2c3b2f45582cc3234df41" title="stepper_az" alt="" coords="157,56,250,83"/>
<area shape="rect" id="node4" href="stepper__motor__controller_8ino.html#ae50506f007819f8841a2ead6e8ddb509" title="stepper_el" alt="" coords="158,107,249,133"/>
<area shape="rect" id="node5" href="classwdt__timer.html#a1be743743ff4d19d726a45c2d49fbada" title="Reset the watchdog timer. " alt="" coords="124,158,283,199"/>
</map>
</div>

</div>
</div>
<a id="afe461d27b9c48d5921c00d521181f12f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe461d27b9c48d5921c00d521181f12f">&#9670;&nbsp;</a></span>loop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void loop </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="stepper__motor__controller_8ino_source.html#l00084">84</a> of file <a class="el" href="stepper__motor__controller_8ino_source.html">stepper_motor_controller.ino</a>.</p>

<p class="reference">References <a class="el" href="stepper__motor__controller_8ino_source.html#l00049">comm</a>, <a class="el" href="globals_8h_source.html#l00051">control_az</a>, <a class="el" href="globals_8h_source.html#l00054">control_el</a>, <a class="el" href="globals_8h_source.html#l00043">_rotator::control_mode</a>, <a class="el" href="stepper__motor__controller_8ino_source.html#l00211">deg2step()</a>, <a class="el" href="easycomm_8h_source.html#l00048">easycomm::easycomm_proc()</a>, <a class="el" href="globals_8h_source.html#l00017">error</a>, <a class="el" href="endstop_8h_source.html#l00045">endstop::get_state()</a>, <a class="el" href="stepper__motor__controller_8ino_source.html#l00154">homing()</a>, <a class="el" href="globals_8h_source.html#l00021">homing_error</a>, <a class="el" href="globals_8h_source.html#l00044">_rotator::homing_flag</a>, <a class="el" href="globals_8h_source.html#l00017">idle</a>, <a class="el" href="globals_8h_source.html#l00030">_control::input</a>, <a class="el" href="stepper__motor__controller_8ino_source.html#l00033">MAX_M1_ANGLE</a>, <a class="el" href="stepper__motor__controller_8ino_source.html#l00035">MAX_M2_ANGLE</a>, <a class="el" href="globals_8h_source.html#l00021">no_error</a>, <a class="el" href="globals_8h_source.html#l00017">pointing</a>, <a class="el" href="globals_8h_source.html#l00026">position</a>, <a class="el" href="globals_8h_source.html#l00057">rotator</a>, <a class="el" href="globals_8h_source.html#l00042">_rotator::rotator_error</a>, <a class="el" href="globals_8h_source.html#l00041">_rotator::rotator_status</a>, <a class="el" href="globals_8h_source.html#l00033">_control::setpoint</a>, <a class="el" href="stepper__motor__controller_8ino_source.html#l00224">step2deg()</a>, <a class="el" href="stepper__motor__controller_8ino.html#ac9a4325f61d2c3b2f45582cc3234df41">stepper_az()</a>, <a class="el" href="stepper__motor__controller_8ino.html#ae50506f007819f8841a2ead6e8ddb509">stepper_el()</a>, <a class="el" href="globals_8h_source.html#l00048">_rotator::switch_az</a>, <a class="el" href="stepper__motor__controller_8ino.html#a0c0a9fc59fead4da5429a12a827f6e92">switch_az</a>, <a class="el" href="globals_8h_source.html#l00048">_rotator::switch_el</a>, <a class="el" href="stepper__motor__controller_8ino.html#a0886ffe9fa915cc70ac3ed7e528145d9">switch_el</a>, <a class="el" href="watchdog_8h_source.html#l00045">wdt_timer::watchdog_reset()</a>, and <a class="el" href="stepper__motor__controller_8ino_source.html#l00053">wdt</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="stepper__motor__controller_8ino_afe461d27b9c48d5921c00d521181f12f_cgraph.png" border="0" usemap="#stepper__motor__controller_8ino_afe461d27b9c48d5921c00d521181f12f_cgraph" alt=""/></div>
<map name="stepper__motor__controller_8ino_afe461d27b9c48d5921c00d521181f12f_cgraph" id="stepper__motor__controller_8ino_afe461d27b9c48d5921c00d521181f12f_cgraph">
<area shape="rect" id="node2" href="stepper__motor__controller_8ino.html#a989afa0bbcee20968a0c01cb53bf3159" title="Convert degrees to steps according to step/revolution, rotator gear box ratio and microstep..." alt="" coords="167,107,250,133"/>
<area shape="rect" id="node3" href="classeasycomm.html#a68c229f5c44074fae9992ec9ea605046" title="Get the commands from RS485 and response to the client. " alt="" coords="104,157,313,184"/>
<area shape="rect" id="node9" href="classendstop.html#a530a60aaf81bd5022e56df71c194dfbc" title="Get the state of end&#45;stop. " alt="" coords="373,259,515,285"/>
<area shape="rect" id="node10" href="stepper__motor__controller_8ino.html#afe48c9319f61788ed4622597bdaf17ab" title="Move both axis with one direction in order to find home position, end&#45;stop switches. " alt="" coords="173,313,244,340"/>
<area shape="rect" id="node11" href="stepper__motor__controller_8ino.html#ac9a4325f61d2c3b2f45582cc3234df41" title="stepper_az" alt="" coords="397,309,491,336"/>
<area shape="rect" id="node12" href="stepper__motor__controller_8ino.html#ae50506f007819f8841a2ead6e8ddb509" title="stepper_el" alt="" coords="399,360,489,387"/>
<area shape="rect" id="node13" href="classwdt__timer.html#a1be743743ff4d19d726a45c2d49fbada" title="Reset the watchdog timer. " alt="" coords="365,411,523,453"/>
<area shape="rect" id="node14" href="stepper__motor__controller_8ino.html#a8d74466a27b92f353f6e74a079bb228d" title="Convert steps to degrees according to step/revolution, rotator gear box ratio and microstep..." alt="" coords="167,465,250,492"/>
<area shape="rect" id="node4" href="classrs485.html#a204229ca0c3ee5d24d4c5eac9a543ef7" title="The number of chars/uint8_t that are available in RS485 buffer. " alt="" coords="381,107,507,133"/>
<area shape="rect" id="node5" href="classrs485.html#ac549517006a6b2cff970e3390ccd2c45" title="Read a char/uint8_t from RS485 bus. " alt="" coords="397,157,491,184"/>
<area shape="rect" id="node6" href="classrs485.html#acffe305907c9de94dda20135bc6ad93a" title="Print a string to RS485 bus. " alt="" coords="396,208,492,235"/>
<area shape="rect" id="node7" href="classeasycomm.html#a0da8917b93ae0d477791a86e1edeefb9" title="easycomm::isNumber" alt="" coords="361,5,527,32"/>
<area shape="rect" id="node8" href="classrs485.html#af02e2635ac5bb688bc9f05895a983704" title="Waits for the transmission of outgoing serial data to complete. " alt="" coords="395,56,493,83"/>
</map>
</div>

</div>
</div>
<a id="a4fc01d736fe50cf5b977f755b675f11d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4fc01d736fe50cf5b977f755b675f11d">&#9670;&nbsp;</a></span>setup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setup </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="stepper__motor__controller_8ino_source.html#l00059">59</a> of file <a class="el" href="stepper__motor__controller_8ino_source.html">stepper_motor_controller.ino</a>.</p>

<p class="reference">References <a class="el" href="stepper__motor__controller_8ino_source.html#l00049">comm</a>, <a class="el" href="easycomm_8h_source.html#l00039">easycomm::easycomm_init()</a>, <a class="el" href="endstop_8h_source.html#l00035">endstop::init()</a>, <a class="el" href="stepper__motor__controller_8ino_source.html#l00030">MAX_ACCELERATION</a>, <a class="el" href="stepper__motor__controller_8ino_source.html#l00029">MAX_SPEED</a>, <a class="el" href="stepper__motor__controller_8ino_source.html#l00028">MIN_PULSE_WIDTH</a>, <a class="el" href="rotator__pins_8h_source.html#l00023">MOTOR_EN</a>, <a class="el" href="stepper__motor__controller_8ino.html#ac9a4325f61d2c3b2f45582cc3234df41">stepper_az()</a>, <a class="el" href="stepper__motor__controller_8ino.html#ae50506f007819f8841a2ead6e8ddb509">stepper_el()</a>, <a class="el" href="stepper__motor__controller_8ino.html#a0c0a9fc59fead4da5429a12a827f6e92">switch_az</a>, <a class="el" href="stepper__motor__controller_8ino.html#a0886ffe9fa915cc70ac3ed7e528145d9">switch_el</a>, <a class="el" href="watchdog_8h_source.html#l00032">wdt_timer::watchdog_init()</a>, and <a class="el" href="stepper__motor__controller_8ino_source.html#l00053">wdt</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="stepper__motor__controller_8ino_a4fc01d736fe50cf5b977f755b675f11d_cgraph.png" border="0" usemap="#stepper__motor__controller_8ino_a4fc01d736fe50cf5b977f755b675f11d_cgraph" alt=""/></div>
<map name="stepper__motor__controller_8ino_a4fc01d736fe50cf5b977f755b675f11d_cgraph" id="stepper__motor__controller_8ino_a4fc01d736fe50cf5b977f755b675f11d_cgraph">
<area shape="rect" id="node2" href="classeasycomm.html#a7db30a0f3a754dc281cbedab461d76f6" title="Initialize the RS485 bus. " alt="" coords="112,5,315,32"/>
<area shape="rect" id="node4" href="classendstop.html#a6d24d7ed95ded92431288da42a6aebf9" title="Initialize the Input pin for end&#45;stop. " alt="" coords="162,56,265,83"/>
<area shape="rect" id="node5" href="stepper__motor__controller_8ino.html#ac9a4325f61d2c3b2f45582cc3234df41" title="stepper_az" alt="" coords="167,107,260,133"/>
<area shape="rect" id="node6" href="stepper__motor__controller_8ino.html#ae50506f007819f8841a2ead6e8ddb509" title="stepper_el" alt="" coords="168,157,259,184"/>
<area shape="rect" id="node7" href="classwdt__timer.html#a4463b57c8af9b89797cb222c745c0355" title="Initialize watchdog timer to 2sec time out and to set up interrupt routine. " alt="" coords="120,208,307,235"/>
<area shape="rect" id="node3" href="classrs485.html#ab7cf3f6e3b6e6d79dc490145aa3c1b12" title="Initialize the RS485 transceiver. " alt="" coords="363,5,465,32"/>
</map>
</div>

</div>
</div>
<a id="a8d74466a27b92f353f6e74a079bb228d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8d74466a27b92f353f6e74a079bb228d">&#9670;&nbsp;</a></span>step2deg()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float step2deg </td>
          <td>(</td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>step</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert steps to degrees according to step/revolution, rotator gear box ratio and microstep. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">step</td><td>Steps in int32_t format </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Degrees in float format </dd></dl>

<p class="definition">Definition at line <a class="el" href="stepper__motor__controller_8ino_source.html#l00224">224</a> of file <a class="el" href="stepper__motor__controller_8ino_source.html">stepper_motor_controller.ino</a>.</p>

<p class="reference">References <a class="el" href="stepper__motor__controller_8ino_source.html#l00026">RATIO</a>, and <a class="el" href="stepper__motor__controller_8ino_source.html#l00031">SPR</a>.</p>

<p class="reference">Referenced by <a class="el" href="stepper__motor__controller_8ino_source.html#l00084">loop()</a>.</p>

</div>
</div>
<a id="ac9a4325f61d2c3b2f45582cc3234df41"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac9a4325f61d2c3b2f45582cc3234df41">&#9670;&nbsp;</a></span>stepper_az()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AccelStepper stepper_az </td>
          <td>(</td>
          <td class="paramtype">1&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="rotator__pins_8h.html#a52eb32b92f0d0d1fdfc59a83e22d389d">M1IN1</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="rotator__pins_8h.html#a157fe9dc9b50d6f912b57b3422848700">M1IN2</a>&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="stepper__motor__controller_8ino_source.html#l00154">homing()</a>, <a class="el" href="stepper__motor__controller_8ino_source.html#l00084">loop()</a>, and <a class="el" href="stepper__motor__controller_8ino_source.html#l00059">setup()</a>.</p>

</div>
</div>
<a id="ae50506f007819f8841a2ead6e8ddb509"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae50506f007819f8841a2ead6e8ddb509">&#9670;&nbsp;</a></span>stepper_el()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AccelStepper stepper_el </td>
          <td>(</td>
          <td class="paramtype">1&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="rotator__pins_8h.html#ad43a98121cb04032302978a3319ba24e">M2IN1</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="rotator__pins_8h.html#a1f7e92e76bed5849fc1edc2e42c995dc">M2IN2</a>&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="stepper__motor__controller_8ino_source.html#l00154">homing()</a>, <a class="el" href="stepper__motor__controller_8ino_source.html#l00084">loop()</a>, and <a class="el" href="stepper__motor__controller_8ino_source.html#l00059">setup()</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a43731445552d0e8cea4cbc7c75ba56cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a43731445552d0e8cea4cbc7c75ba56cb">&#9670;&nbsp;</a></span>comm</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classeasycomm.html">easycomm</a> comm</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="stepper__motor__controller_8ino_source.html#l00049">49</a> of file <a class="el" href="stepper__motor__controller_8ino_source.html">stepper_motor_controller.ino</a>.</p>

<p class="reference">Referenced by <a class="el" href="stepper__motor__controller_8ino_source.html#l00084">loop()</a>, and <a class="el" href="stepper__motor__controller_8ino_source.html#l00059">setup()</a>.</p>

</div>
</div>
<a id="a0c0a9fc59fead4da5429a12a827f6e92"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0c0a9fc59fead4da5429a12a827f6e92">&#9670;&nbsp;</a></span>switch_az</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classendstop.html">endstop</a> switch_az(<a class="el" href="rotator__pins_8h.html#ad98a4599f8bbf48bb5b425ce5edb5a42">SW1</a>, <a class="el" href="stepper__motor__controller_8ino.html#aa9fdf484ccfc3264b1505135c801aadc">DEFAULT_HOME_STATE</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="stepper__motor__controller_8ino_source.html#l00154">homing()</a>, <a class="el" href="stepper__motor__controller_8ino_source.html#l00084">loop()</a>, and <a class="el" href="stepper__motor__controller_8ino_source.html#l00059">setup()</a>.</p>

</div>
</div>
<a id="a0886ffe9fa915cc70ac3ed7e528145d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0886ffe9fa915cc70ac3ed7e528145d9">&#9670;&nbsp;</a></span>switch_el</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classendstop.html">endstop</a> switch_el(<a class="el" href="rotator__pins_8h.html#a276a7c4ba0f813d53715e2ec2595d906">SW2</a>, <a class="el" href="stepper__motor__controller_8ino.html#aa9fdf484ccfc3264b1505135c801aadc">DEFAULT_HOME_STATE</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="stepper__motor__controller_8ino_source.html#l00154">homing()</a>, <a class="el" href="stepper__motor__controller_8ino_source.html#l00084">loop()</a>, and <a class="el" href="stepper__motor__controller_8ino_source.html#l00059">setup()</a>.</p>

</div>
</div>
<a id="ab758c64f84e0623e98a61e37b9bdd2b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab758c64f84e0623e98a61e37b9bdd2b7">&#9670;&nbsp;</a></span>t_run</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t t_run = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="stepper__motor__controller_8ino_source.html#l00048">48</a> of file <a class="el" href="stepper__motor__controller_8ino_source.html">stepper_motor_controller.ino</a>.</p>

</div>
</div>
<a id="aa21a88a61f63525bb1db8401772e7f70"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa21a88a61f63525bb1db8401772e7f70">&#9670;&nbsp;</a></span>wdt</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classwdt__timer.html">wdt_timer</a> wdt</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="stepper__motor__controller_8ino_source.html#l00053">53</a> of file <a class="el" href="stepper__motor__controller_8ino_source.html">stepper_motor_controller.ino</a>.</p>

<p class="reference">Referenced by <a class="el" href="stepper__motor__controller_8ino_source.html#l00154">homing()</a>, <a class="el" href="stepper__motor__controller_8ino_source.html#l00084">loop()</a>, and <a class="el" href="stepper__motor__controller_8ino_source.html#l00059">setup()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
